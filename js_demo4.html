<script>
    // Symbol (ES6)
    // Primitive type JS: number, boolean, null, undefined, string
    let sA = Symbol('foo');
    console.log(sA)
    console.log(typeof sA)
    console.log(Symbol() === Symbol())

    let firstNameA = Symbol('first name a');
    let lastNameA = Symbol('last name a');
    console.log(firstNameA)
    console.log(firstNameA)
    console.log(lastNameA)

    // let sB = new Symbol('abc'); // error because symbol is a primitive value

    let ssnA = Symbol.for('ssnA');
    console.log(ssnA)
    let citizenIDA = Symbol.for('ssnA');
    console.log(citizenIDA)
    console.log(ssnA === citizenIDA)
    console.log(Symbol.keyFor(citizenIDA))

    let systemIDA = Symbol('sys');
    console.log(Symbol.keyFor(systemIDA))

    let statusesB = {
        OPEN: Symbol('Open'),
        IN_PROGRESS: Symbol('In progress'),
        COMPLETED: Symbol('Completed'),
        HOLD: Symbol('On hold'),
        CANCELED: Symbol('Canceled')
    }

    let statusB = Symbol('status');
    let taskA = {
        [statusB]: statusesB.OPEN,
        description: 'Learn ES6 Symbol'
    }
    console.log(taskA)

    console.log(Object.keys(taskA))
    console.log(Object.getOwnPropertyNames(taskA))
    console.log(Object.getOwnPropertySymbols(taskA))

    class StackA {

    }
    console.log([] instanceof StackA); //false

    class StackB {
        static [Symbol.hasInstance](obj) {
            return Array.isArray(obj);
        }
    }
    console.log([] instanceof StackB); //true

    var numbersA = [1, 2, 3];
    for (let num of numbersA) {
        console.log(num)
    }
    var iteratorA = numbersA[Symbol.iterator]();
    console.log(iteratorA)
    console.log(iteratorA.next());
    console.log(iteratorA.next());
    console.log(iteratorA.next());
    console.log(iteratorA.next());

    class ListA {
        constructor() {
            this.elements = [];
        }

        add(element) {
            this.elements.push(element);
            return this;
        }

        *[Symbol.iterator]() {
            for (let element of this.elements) {
                yield element;
            }
        }
    }

    let charsA = new ListA();
    charsA.add('A').add('B').add('C');
    console.log(charsA)

    for (let c of charsA) {
        console.log(c)
    }

    let oddA = [1, 3];
    let evenA = [2, 4];
    let allA = oddA.concat(evenA, [5, 6]);
    console.log(oddA)
    console.log(allA)

    let extrasA = allA.concat(999);
    console.log(extrasA)

    let listB = {
        0: 'Javascript',
        1: 'Symbol',
        length: 2
    };
    let messageB  = ['Learning'].concat(listB);
    console.log(messageB)

    let listC = {
        0: 'Javascript',
        1: 'Symbol',
        length: 2,
        [Symbol.isConcatSpreadable]: true
    };
    let messageC = ['Learning'].concat(listC);
    console.log(messageC);

    function MoneyA(amount, currency) {
        this.amount = amount;
        this.currency = currency;
    }
    MoneyA.prototype[Symbol.toPrimitive] = function(hint) {
        console.log(hint)
        var result;
        switch (hint) {
            case 'string':
                result = this.amount + this.currency;
                break;
            case 'number':
                result = this.amount;
                break;
            case 'default':
                result = this.amount + this.currency;
                break;
        }
        return result;
    }
    var priceA = new MoneyA(799, 'USD');
    console.log('Price is ' + priceA);
    console.log(+priceA + 1);
    console.log(String(priceA))

    // Map Object: giai quyet van de 1 obj luon co 1 key mac dinh la prototype, 1 key cua obj phai la string hoac symbol, va obj ko co thuoc tinh quy dinh size
    // let mapA = new Map
    let johnA = {name: 'John Doe'},
        lilyA = {name: 'Lily Bush'},
        peterA = {name: 'Peter Drucker'};
    let userRolesA = new Map();
    console.log(userRolesA)
    console.log(userRolesA.size)
    console.log(typeof(userRolesA));
    console.log(userRolesA instanceof Map)

    userRolesA.set(johnA, 'admin').set(lilyA, 'editor').set(peterA, 'subscriber');
    console.log(userRolesA)

    let userRolesB = new Map([
        [johnA, 'admin'],
        [lilyA, 'editor'],
        [peterA, 'subscriber'],
    ])
    console.log(userRolesB)

    console.log(userRolesA.get(johnA))
    console.log(userRolesA.get('dsadssd'))

    console.log(userRolesA.has(johnA))
    console.log(userRolesA.has('abc'))
    console.log(userRolesA.size)

    console.log(userRolesA.keys())


    let johnC = {name: 'John Doe'},
        lilyC = {name: 'Lily Bush'},
        peterC = {name: 'Peter Drucker'};
    let userRolesC = new Map([
        [johnC, 'admin'],
        [lilyC, 'editor'],
        [peterC, 'subscriber']
    ])

    for (const user of userRolesC.keys()) {
        console.log(user.name)
    }

    let johnD = {name: 'John Doe'},
        lilyD = {name: 'Lily Bush'},
        peterD = {name: 'Peter Drucker'};
    let userRolesD = new Map([
        [johnD, 'admin'],
        [lilyD, 'editor'],
        [peterD, 'subscriber']
    ]);
    for (let role of userRolesD.values()) {
        console.log(role)
    }


    let johnE = {name: 'John Doe'},
        lilyE = {name: 'Lily Bush'},
        peterE = {name: 'Peter Drucker'}
    let userRolesE = new Map([
        [johnE, 'admin'],
        [lilyE, 'editor'],
        [peterD, 'subscriber']
    ])

    console.log(userRolesE.entries())
    for (const role of userRolesE.entries()) {
        console.log(`Username: ${role[0].name} with role ${role[1]}`)
    }

    let johnF = {name: 'John Doe'},
        lilyF = {name: 'Lily Bush'},
        peterF = {name: 'Peter Drucker'}

    let userRolesF = new Map([
        [johnF, 'admin'],
        [lilyF, 'editor'],
        [peterF, 'subscriber']
    ]);
    for (let [user, role] of userRolesF.entries()) {
        console.log(`${user.name}: ${role}`)
    }
    // for..of la vong lap cho cac doi tuong iterator

    // forEach
    let johnG = {name: 'John Doe'},
        lilyG = {name: 'Lily Bush'},
        peterG = {name: 'Peter Drucker'};
    let userRolesG = new Map([
        [johnG, 'admin'],
        [lilyG, 'editor'],
        [peterG, 'subscriber']
    ]);

    userRolesG.forEach(function(role, user) {
        console.log(`${user.name}: ${role}`)
    })

    var keysA = [...userRolesA.keys()];
    console.log(keysA)
    var rolesA = [...userRolesA.values()];
    console.log(rolesA)
    rolesA.forEach((role) => {
        console.log(`Role: ${role}`)
    })

    console.log(userRolesA)
    console.log(userRolesA.size)
    userRolesA.clear();
    console.log(userRolesA)
    console.log(userRolesA.size)

    // WeakMap tuong tu nhu Map ngoai tru  key bat buoc phai la obj, WeakMap ko the lap, ko the xoa tat ca element cung 1 luc, ko the check dc size
    // cua WeakMap
    var weakMap = new WeakMap([
        [{name: 'abc1'}, {age: 123}],
        [{name: 'abc1'}, {age: 234}],
        [{name: 'abc2'}, {age: 345}],
        // ['aaaa', {age: 345}],
    ])
    weakMap.delete({name: 'abc'});
    console.log(weakMap)
    console.log(weakMap.size)

    // for (const a of weakMap) {
    //     console.log(a)
    // }

    // Set object: luu cac gia tri unique, key luon trung value
    let setObjectA = new Set();
    console.log(setObjectA)

    let charsB = new Set(['a', 'a', 'b', 'c', 'c']);
    console.log(charsB)
    console.log(typeof charsB)

    let resultB = charsB instanceof Set;
    console.log(resultB)
    console.log(charsB.size);

    charsB.add('d').add('e').add('f')
    console.log(charsB)
    charsB.add('a')
    console.log(charsB)

    let existB = charsB.has('z');
    console.log(existB)

    charsB.delete('a');
    // charsB.clear();
    console.log(charsB)

    let rolesC = new Set();
    rolesC.add('admin').add('editor').add('subscriber');

    for (let role of rolesC) {
        console.log(role)
    }

    for (let [key, value] of rolesC.entries()) {
        console.log(key)
        console.log(value)
    }

    rolesC.forEach(role => {
        console.log(role.toUpperCase())
    })

    //WeakSet: giong Set nhung chi chua obj, WeakSet/WeakMap co co che auto garbage, ko co size, it khi su dung trong
    //thuc te
    let computerC = {type: 'laptop'};
    let serverC = {type: 'server'};
    let equipmentC = new WeakSet([computerC, serverC]);
    if (equipmentC.has(serverC)) {
        console.log('We have a server');
    }

</script>
